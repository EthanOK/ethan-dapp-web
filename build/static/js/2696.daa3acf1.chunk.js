/*! For license information please see 2696.daa3acf1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkethan_dapp_web=self.webpackChunkethan_dapp_web||[]).push([[2696],{72696:(t,e,n)=>{n.d(e,{default:()=>De});const s=t=>t.toString(16).padStart(2,"0"),i=()=>"undefined"!==typeof window?(t=>{const e=new Uint8Array((t||40)/2);return window.crypto.getRandomValues(e),Array.from(e,s).join("")})(10):(new Date).getTime().toString(36);class r{}var o,a;r.makeRequest=(t,e)=>({id:i(),method:t,params:e,env:{sdkVersion:"9.1.0"}}),r.makeResponse=(t,e,n)=>({id:t,success:!0,version:n,data:e}),r.makeErrorResponse=(t,e,n)=>({id:t,success:!1,error:e,version:n}),function(t){t.sendTransactions="sendTransactions",t.rpcCall="rpcCall",t.getChainInfo="getChainInfo",t.getSafeInfo="getSafeInfo",t.getTxBySafeTxHash="getTxBySafeTxHash",t.getSafeBalances="getSafeBalances",t.signMessage="signMessage",t.signTypedMessage="signTypedMessage",t.getEnvironmentInfo="getEnvironmentInfo",t.getOffChainSignature="getOffChainSignature",t.requestAddressBook="requestAddressBook",t.wallet_getPermissions="wallet_getPermissions",t.wallet_requestPermissions="wallet_requestPermissions"}(o||(o={})),function(t){t.requestAddressBook="requestAddressBook"}(a||(a={}));const c=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"===typeof window,this.isValidMessage=t=>{let{origin:e,data:n,source:s}=t;const i=!n,r=!this.isServer&&s===window.parent,o="undefined"!==typeof n.version&&parseInt(n.version.split(".")[0]),a="number"===typeof o&&o>=1;let c=!0;return Array.isArray(this.allowedOrigins)&&(c=void 0!==this.allowedOrigins.find((t=>t.test(e)))),!i&&r&&a&&c},this.logIncomingMessage=t=>{console.info("Safe Apps SDK v1: A message was received from origin ".concat(t.origin,". "),t.data)},this.onParentMessage=t=>{this.isValidMessage(t)&&(this.debugMode&&this.logIncomingMessage(t),this.handleIncomingMessage(t.data))},this.handleIncomingMessage=t=>{const{id:e}=t,n=this.callbacks.get(e);n&&(n(t),this.callbacks.delete(e))},this.send=(t,e)=>{const n=r.makeRequest(t,e);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(n,"*"),new Promise(((t,e)=>{this.callbacks.set(n.id,(n=>{n.success?t(n):e(new Error(n.error))}))}))},this.allowedOrigins=t,this.debugMode=e,this.isServer||window.addEventListener("message",this.onParentMessage)}},u=t=>"object"===typeof t&&null!=t&&"domain"in t&&"types"in t&&"message"in t;n(41546);class l{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(o.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const e={message:t};return(await this.communicator.send(o.signMessage,e)).data}async signTypedMessage(t){if(!u(t))throw new Error("Invalid typed data");return(await this.communicator.send(o.signTypedMessage,{typedData:t})).data}async send(t){let{txs:e,params:n}=t;if(!e||!e.length)throw new Error("No transactions were passed");const s={txs:e,params:n};return(await this.communicator.send(o.sendTransactions,s)).data}}const d="eth_call",h="eth_gasPrice",p="eth_getLogs",f="eth_getBalance",y="eth_getCode",g="eth_getBlockByHash",m="eth_getBlockByNumber",b="eth_getStorageAt",v="eth_getTransactionByHash",w="eth_getTransactionReceipt",x="eth_getTransactionCount",A="eth_estimateGas",I="safe_setSettings",z={defaultBlockParam:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:"latest"},returnFullTxObjectParam:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},blockNumberToHex:t=>Number.isInteger(t)?"0x".concat(t.toString(16)):t};class S{constructor(t){this.communicator=t,this.call=this.buildRequest({call:d,formatters:[null,z.defaultBlockParam]}),this.getBalance=this.buildRequest({call:f,formatters:[null,z.defaultBlockParam]}),this.getCode=this.buildRequest({call:y,formatters:[null,z.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:b,formatters:[null,z.blockNumberToHex,z.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:p}),this.getBlockByHash=this.buildRequest({call:g,formatters:[null,z.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:m,formatters:[z.blockNumberToHex,z.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:v}),this.getTransactionReceipt=this.buildRequest({call:w}),this.getTransactionCount=this.buildRequest({call:x,formatters:[null,z.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:h}),this.getEstimateGas=t=>this.buildRequest({call:A})([t]),this.setSafeSettings=this.buildRequest({call:I})}buildRequest(t){const{call:e,formatters:n}=t;return async t=>{n&&Array.isArray(t)&&n.forEach(((e,n)=>{e&&(t[n]=e(t[n]))}));const s={call:e,params:t||[]};return(await this.communicator.send(o.rpcCall,s)).data}}}var k=n(40319);function E(t){return"string"===typeof t[0]?B(t):function(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let s=0;for(const i of t)n.set(i,s),s+=i.length;return n}(t)}function B(t){return"0x".concat(t.reduce(((t,e)=>t+e.replace("0x","")),""))}function P(t){let{includeName:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!==t.type&&"event"!==t.type&&"error"!==t.type)throw new W(t.type);return"".concat(t.name,"(").concat(M(t.inputs,{includeName:e}),")")}function M(t){let{includeName:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?t.map((t=>function(t,e){let{includeName:n}=e;if(t.type.startsWith("tuple"))return"(".concat(M(t.components,{includeName:n}),")").concat(t.type.slice(5));return t.type+(n&&t.name?" ".concat(t.name):"")}(t,{includeName:e}))).join(e?", ":","):""}function T(t){let{strict:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!t&&("string"===typeof t&&(e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")))}function O(t){return T(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const N="2.31.7";let j={getDocsUrl:t=>{let{docsBaseUrl:e,docsPath:n="",docsSlug:s}=t;return n?"".concat(null!==e&&void 0!==e?e:"https://viem.sh").concat(n).concat(s?"#".concat(s):""):void 0},version:"viem@".concat(N)};class C extends Error{constructor(t){var e,n,s;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=i.cause instanceof C?i.cause.details:null!==(o=i.cause)&&void 0!==o&&o.message?i.cause.message:i.details;var o;const a=i.cause instanceof C&&i.cause.docsPath||i.docsPath,c=null===(e=(n=j).getDocsUrl)||void 0===e?void 0:e.call(n,(0,k.A)((0,k.A)({},i),{},{docsPath:a}));super([t||"An error occurred.","",...i.metaMessages?[...i.metaMessages,""]:[],...c?["Docs: ".concat(c)]:[],...r?["Details: ".concat(r)]:[],...j.version?["Version: ".concat(j.version)]:[]].join("\n"),i.cause?{cause:i.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=a,this.metaMessages=i.metaMessages,this.name=null!==(s=i.name)&&void 0!==s?s:this.name,this.shortMessage=t,this.version=N}walk(t){return L(this,t)}}function L(t,e){return null!==e&&void 0!==e&&e(t)?t:t&&"object"===typeof t&&"cause"in t&&void 0!==t.cause?L(t.cause,e):e?null:t}class _ extends C{constructor(t){let{expectedLength:e,givenLength:n,type:s}=t;super(["ABI encoding array length mismatch for type ".concat(s,"."),"Expected length: ".concat(e),"Given length: ".concat(n)].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}}class q extends C{constructor(t){let{expectedSize:e,value:n}=t;super('Size of bytes "'.concat(n,'" (bytes').concat(O(n),") does not match expected size (bytes").concat(e,")."),{name:"AbiEncodingBytesSizeMismatchError"})}}class R extends C{constructor(t){let{expectedLength:e,givenLength:n}=t;super(["ABI encoding params/values length mismatch.","Expected length (params): ".concat(e),"Given length (values): ".concat(n)].join("\n"),{name:"AbiEncodingLengthMismatchError"})}}class U extends C{constructor(t){let{docsPath:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(["Function ".concat(t?'"'.concat(t,'" '):"","not found on ABI."),"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:e,name:"AbiFunctionNotFoundError"})}}class H extends C{constructor(t,e){super("Found ambiguous types in overloaded ABI items.",{metaMessages:["`".concat(t.type,"` in `").concat(P(t.abiItem),"`, and"),"`".concat(e.type,"` in `").concat(P(e.abiItem),"`"),"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class F extends C{constructor(t){let{expectedSize:e,givenSize:n}=t;super("Expected bytes".concat(e,", got bytes").concat(n,"."),{name:"BytesSizeMismatchError"})}}class D extends C{constructor(t,e){let{docsPath:n}=e;super(['Type "'.concat(t,'" is not a valid encoding type.'),"Please provide a valid ABI type."].join("\n"),{docsPath:n,name:"InvalidAbiEncodingType"})}}class V extends C{constructor(t){super(['Value "'.concat(t,'" is not a valid array.')].join("\n"),{name:"InvalidArrayError"})}}class W extends C{constructor(t){super(['"'.concat(t,'" is not a valid definition type.'),'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}}class $ extends C{constructor(t){let{address:e}=t;super('Address "'.concat(e,'" is invalid.'),{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class G extends C{constructor(t){let{max:e,min:n,signed:s,size:i,value:r}=t;super('Number "'.concat(r,'" is not in safe ').concat(i?"".concat(8*i,"-bit ").concat(s?"signed":"unsigned"," "):"","integer range ").concat(e?"(".concat(n," to ").concat(e,")"):"(above ".concat(n,")")),{name:"IntegerOutOfRangeError"})}}class X extends C{constructor(t){let{givenSize:e,maxSize:n}=t;super("Size cannot exceed ".concat(n," bytes. Given size: ").concat(e," bytes."),{name:"SizeOverflowError"})}}class J extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const e=super.get(t);return super.has(t)&&void 0!==e&&(this.delete(t),super.set(t,e)),e}set(t,e){if(super.set(t,e),this.maxSize&&this.size>this.maxSize){const t=this.keys().next().value;t&&this.delete(t)}return this}}class K extends C{constructor(t){let{offset:e,position:n,size:s}=t;super("Slice ".concat("start"===n?"starting":"ending",' at offset "').concat(e,'" is out-of-bounds (size: ').concat(s,")."),{name:"SliceOffsetOutOfBoundsError"})}}class Z extends C{constructor(t){let{size:e,targetSize:n,type:s}=t;super("".concat(s.charAt(0).toUpperCase()).concat(s.slice(1).toLowerCase()," size (").concat(e,") exceeds padding size (").concat(n,")."),{name:"SizeExceedsPaddingSizeError"})}}function Q(t){let{dir:e,size:n=32}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t?Y(t,{dir:e,size:n}):function(t){let{dir:e,size:n=32}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===n)return t;if(t.length>n)throw new Z({size:t.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const r="right"===e;s[r?i:n-i-1]=t[r?i:t.length-i-1]}return s}(t,{dir:e,size:n})}function Y(t){let{dir:e,size:n=32}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===n)return t;const s=t.replace("0x","");if(s.length>2*n)throw new Z({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return"0x".concat(s["right"===e?"padEnd":"padStart"](2*n,"0"))}function tt(t,e){let{size:n}=e;if(O(t)>n)throw new X({givenSize:O(t),maxSize:n})}const et=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function nt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"===typeof t||"bigint"===typeof t?rt(t,e):"string"===typeof t?at(t,e):"boolean"===typeof t?st(t,e):it(t,e)}function st(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="0x".concat(Number(t));return"number"===typeof e.size?(tt(n,{size:e.size}),Q(n,{size:e.size})):n}function it(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="";for(let i=0;i<t.length;i++)n+=et[t[i]];const s="0x".concat(n);return"number"===typeof e.size?(tt(s,{size:e.size}),Q(s,{dir:"right",size:e.size})):s}function rt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{signed:n,size:s}=e,i=BigInt(t);let r;s?r=n?(1n<<8n*BigInt(s)-1n)-1n:2n**(8n*BigInt(s))-1n:"number"===typeof t&&(r=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"===typeof r&&n?-r-1n:0;if(r&&i>r||i<o){const e="bigint"===typeof t?"n":"";throw new G({max:r?"".concat(r).concat(e):void 0,min:"".concat(o).concat(e),signed:n,size:s,value:"".concat(t).concat(e)})}const a="0x".concat((n&&i<0?(1n<<BigInt(8*s))+BigInt(i):i).toString(16));return s?Q(a,{size:s}):a}const ot=new TextEncoder;function at(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return it(ot.encode(t),e)}const ct=new TextEncoder;function ut(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"===typeof t||"bigint"===typeof t?function(t,e){const n=rt(t,e);return ht(n)}(t,e):"boolean"===typeof t?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Uint8Array(1);if(n[0]=Number(t),"number"===typeof e.size)return tt(n,{size:e.size}),Q(n,{size:e.size});return n}(t,e):T(t)?ht(t,e):pt(t,e)}const lt={zero:48,nine:57,A:65,F:70,a:97,f:102};function dt(t){return t>=lt.zero&&t<=lt.nine?t-lt.zero:t>=lt.A&&t<=lt.F?t-(lt.A-10):t>=lt.a&&t<=lt.f?t-(lt.a-10):void 0}function ht(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;e.size&&(tt(n,{size:e.size}),n=Q(n,{dir:"right",size:e.size}));let s=n.slice(2);s.length%2&&(s="0".concat(s));const i=s.length/2,r=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const t=dt(s.charCodeAt(a++)),e=dt(s.charCodeAt(a++));if(void 0===t||void 0===e)throw new C('Invalid byte sequence ("'.concat(s[a-2]).concat(s[a-1],'" in "').concat(s,'").'));r[o]=16*t+e}return r}function pt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ct.encode(t);return"number"===typeof e.size?(tt(n,{size:e.size}),Q(n,{dir:"right",size:e.size})):n}const ft=BigInt(2**32-1),yt=BigInt(32);function gt(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(t&ft),l:Number(t>>yt&ft)}:{h:0|Number(t>>yt&ft),l:0|Number(t&ft)}}function mt(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t.length;let s=new Uint32Array(n),i=new Uint32Array(n);for(let r=0;r<n;r++){const{h:n,l:o}=gt(t[r],e);[s[r],i[r]]=[n,o]}return[s,i]}const bt=(t,e,n)=>t<<n|e>>>32-n,vt=(t,e,n)=>e<<n|t>>>32-n,wt=(t,e,n)=>e<<n-32|t>>>64-n,xt=(t,e,n)=>t<<n-32|e>>>64-n;function At(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function It(t){if(!((e=t)instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw new Error("Uint8Array expected");for(var e,n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];if(s.length>0&&!s.includes(t.length))throw new Error("Uint8Array expected of length "+s+", got length="+t.length)}function zt(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function St(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let s=0;s<e.length;s++)e[s].fill(0)}const kt=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function Et(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Bt=kt?t=>t:function(t){for(let e=0;e<t.length;e++)t[e]=Et(t[e]);return t};function Pt(t){if("string"!==typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function Mt(t){return"string"===typeof t&&(t=Pt(t)),It(t),t}class Tt{}function Ot(t){const e=e=>t().update(Mt(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const Nt=BigInt(0),jt=BigInt(1),Ct=BigInt(2),Lt=BigInt(7),_t=BigInt(256),qt=BigInt(113),Rt=[],Ut=[],Ht=[];for(let Ve=0,We=jt,$e=1,Ge=0;Ve<24;Ve++){[$e,Ge]=[Ge,(2*$e+3*Ge)%5],Rt.push(2*(5*Ge+$e)),Ut.push((Ve+1)*(Ve+2)/2%64);let t=Nt;for(let e=0;e<7;e++)We=(We<<jt^(We>>Lt)*qt)%_t,We&Ct&&(t^=jt<<(jt<<BigInt(e))-jt);Ht.push(t)}const Ft=mt(Ht,!0),Dt=Ft[0],Vt=Ft[1],Wt=(t,e,n)=>n>32?wt(t,e,n):bt(t,e,n),$t=(t,e,n)=>n>32?xt(t,e,n):vt(t,e,n);class Gt extends Tt{constructor(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=s,this.rounds=i,At(n),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");var r;this.state=new Uint8Array(200),this.state32=(r=this.state,new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)))}clone(){return this._cloneInto()}keccak(){Bt(this.state32),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let s=0;s<10;s++)n[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){const e=(s+8)%10,i=(s+2)%10,r=n[i],o=n[i+1],a=Wt(r,o,1)^n[e],c=$t(r,o,1)^n[e+1];for(let n=0;n<50;n+=10)t[s+n]^=a,t[s+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const s=Ut[n],r=Wt(e,i,s),o=$t(e,i,s),a=Rt[n];e=t[a],i=t[a+1],t[a]=r,t[a+1]=o}for(let s=0;s<50;s+=10){for(let e=0;e<10;e++)n[e]=t[s+e];for(let e=0;e<10;e++)t[s+e]^=~n[(e+2)%10]&n[(e+4)%10]}t[0]^=Dt[s],t[1]^=Vt[s]}St(n)}(this.state32,this.rounds),Bt(this.state32),this.posOut=0,this.pos=0}update(t){zt(this),It(t=Mt(t));const{blockLen:e,state:n}=this,s=t.length;for(let i=0;i<s;){const r=Math.min(e-this.pos,s-i);for(let e=0;e<r;e++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:s}=this;t[n]^=e,0!==(128&e)&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){zt(this,!1),It(t),this.finish();const e=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const r=Math.min(n-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+r),s),this.posOut+=r,s+=r}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return At(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(function(t,e){It(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,St(this.state)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:s,rounds:i,enableXOF:r}=this;return t||(t=new Gt(e,n,s,r,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=r,t.destroyed=this.destroyed,t}}const Xt=(t,e,n)=>Ot((()=>new Gt(e,t,n))),Jt=(()=>Xt(1,136,32))();function Kt(t,e){const n=e||"hex",s=Jt(T(t,{strict:!1})?ut(t):t);return"bytes"===n?s:nt(s)}const Zt=new J(8192);function Qt(t,e){if(Zt.has("".concat(t,".").concat(e)))return Zt.get("".concat(t,".").concat(e));const n=e?"".concat(e).concat(t.toLowerCase()):t.substring(2).toLowerCase(),s=Kt(pt(n),"bytes"),i=(e?n.substring("".concat(e,"0x").length):n).split("");for(let o=0;o<40;o+=2)s[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(15&s[o>>1])>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const r="0x".concat(i.join(""));return Zt.set("".concat(t,".").concat(e),r),r}const Yt=/^0x[a-fA-F0-9]{40}$/,te=new J(8192);function ee(t,e){const{strict:n=!0}=null!==e&&void 0!==e?e:{},s="".concat(t,".").concat(n);if(te.has(s))return te.get(s);const i=!!Yt.test(t)&&(t.toLowerCase()===t||!n||Qt(t)===t);return te.set(s,i),i}function ne(t,e,n){let{strict:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return T(t,{strict:!1})?function(t,e,n){let{strict:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};se(t,e);const i="0x".concat(t.replace("0x","").slice(2*(null!==e&&void 0!==e?e:0),2*(null!==n&&void 0!==n?n:t.length)));s&&ie(i,e,n);return i}(t,e,n,{strict:s}):function(t,e,n){let{strict:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};se(t,e);const i=t.slice(e,n);s&&ie(i,e,n);return i}(t,e,n,{strict:s})}function se(t,e){if("number"===typeof e&&e>0&&e>O(t)-1)throw new K({offset:e,position:"start",size:O(t)})}function ie(t,e,n){if("number"===typeof e&&"number"===typeof n&&O(t)!==n-e)throw new K({offset:n,position:"end",size:O(t)})}const re=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,oe=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function ae(t,e){if(t.length!==e.length)throw new R({expectedLength:t.length,givenLength:e.length});const n=function(t){let{params:e,values:n}=t;const s=[];for(let i=0;i<e.length;i++)s.push(ce({param:e[i],value:n[i]}));return s}({params:t,values:e}),s=ue(n);return 0===s.length?"0x":s}function ce(t){let{param:e,value:n}=t;const s=function(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}(e.type);if(s){const[t,i]=s;return function(t,e){let{length:n,param:s}=e;const i=null===n;if(!Array.isArray(t))throw new V(t);if(!i&&t.length!==n)throw new _({expectedLength:n,givenLength:t.length,type:"".concat(s.type,"[").concat(n,"]")});let r=!1;const o=[];for(let a=0;a<t.length;a++){const e=ce({param:s,value:t[a]});e.dynamic&&(r=!0),o.push(e)}if(i||r){const t=ue(o);if(i){const e=rt(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?E([e,t]):e}}if(r)return{dynamic:!0,encoded:t}}return{dynamic:!1,encoded:E(o.map((t=>{let{encoded:e}=t;return e})))}}(n,{length:t,param:(0,k.A)((0,k.A)({},e),{},{type:i})})}if("tuple"===e.type)return function(t,e){let{param:n}=e,s=!1;const i=[];for(let r=0;r<n.components.length;r++){const e=n.components[r],o=ce({param:e,value:t[Array.isArray(t)?r:e.name]});i.push(o),o.dynamic&&(s=!0)}return{dynamic:s,encoded:s?ue(i):E(i.map((t=>{let{encoded:e}=t;return e})))}}(n,{param:e});if("address"===e.type)return function(t){if(!ee(t))throw new $({address:t});return{dynamic:!1,encoded:Y(t.toLowerCase())}}(n);if("bool"===e.type)return function(t){if("boolean"!==typeof t)throw new C('Invalid boolean value: "'.concat(t,'" (type: ').concat(typeof t,"). Expected: `true` or `false`."));return{dynamic:!1,encoded:Y(st(t))}}(n);if(e.type.startsWith("uint")||e.type.startsWith("int")){var i;const t=e.type.startsWith("int"),[,,s="256"]=null!==(i=oe.exec(e.type))&&void 0!==i?i:[];return function(t,e){let{signed:n,size:s=256}=e;if("number"===typeof s){const e=2n**(BigInt(s)-(n?1n:0n))-1n,i=n?-e-1n:0n;if(t>e||t<i)throw new G({max:e.toString(),min:i.toString(),signed:n,size:s/8,value:t.toString()})}return{dynamic:!1,encoded:rt(t,{size:32,signed:n})}}(n,{signed:t,size:Number(s)})}if(e.type.startsWith("bytes"))return function(t,e){let{param:n}=e;const[,s]=n.type.split("bytes"),i=O(t);if(!s){let e=t;return i%32!==0&&(e=Y(e,{dir:"right",size:32*Math.ceil((t.length-2)/2/32)})),{dynamic:!0,encoded:E([Y(rt(i,{size:32})),e])}}if(i!==Number.parseInt(s))throw new q({expectedSize:Number.parseInt(s),value:t});return{dynamic:!1,encoded:Y(t,{dir:"right"})}}(n,{param:e});if("string"===e.type)return function(t){const e=at(t),n=Math.ceil(O(e)/32),s=[];for(let i=0;i<n;i++)s.push(Y(ne(e,32*i,32*(i+1)),{dir:"right"}));return{dynamic:!0,encoded:E([Y(rt(O(e),{size:32})),...s])}}(n);throw new D(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function ue(t){let e=0;for(let r=0;r<t.length;r++){const{dynamic:n,encoded:s}=t[r];e+=n?32:O(s)}const n=[],s=[];let i=0;for(let r=0;r<t.length;r++){const{dynamic:o,encoded:a}=t[r];o?(n.push(rt(e+i,{size:32})),s.push(a),i+=O(a)):n.push(a)}return E([...n,...s])}const le=t=>Kt(ut(t));const de=(0,n(3308).A)(/^tuple((\[(\d*)\])*)$/,{array:1});function he(t){let e=t.type;if(de.test(t.type)&&"components"in t){var n;e="(";const s=t.components.length;for(let n=0;n<s;n++){e+=he(t.components[n]),n<s-1&&(e+=", ")}const i=function(t,e){const n=t.exec(e);return null===n||void 0===n?void 0:n.groups}(de,t.type);return e+=")".concat(null!==(n=null===i||void 0===i?void 0:i.array)&&void 0!==n?n:""),he((0,k.A)((0,k.A)({},t),{},{type:e}))}return"indexed"in t&&t.indexed&&(e="".concat(e," indexed")),t.name?"".concat(e," ").concat(t.name):e}function pe(t){let e="";const n=t.length;for(let s=0;s<n;s++){e+=he(t[s]),s!==n-1&&(e+=", ")}return e}const fe=t=>function(t){let e=!0,n="",s=0,i="",r=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),"("===a&&s++,")"===a&&s--,e)if(0!==s)" "!==a?(i+=a,n+=a):","!==t[o-1]&&","!==n&&",("!==n&&(n="",e=!1);else if(" "===a&&["event","function",""].includes(i))i="";else if(i+=a,")"===a){r=!0;break}}if(!r)throw new C("Unable to normalize signature.");return i}("string"===typeof t?t:function(t){var e;return"function"===t.type?"function ".concat(t.name,"(").concat(pe(t.inputs),")").concat(t.stateMutability&&"nonpayable"!==t.stateMutability?" ".concat(t.stateMutability):"").concat(null!==(e=t.outputs)&&void 0!==e&&e.length?" returns (".concat(pe(t.outputs),")"):""):"event"===t.type?"event ".concat(t.name,"(").concat(pe(t.inputs),")"):"error"===t.type?"error ".concat(t.name,"(").concat(pe(t.inputs),")"):"constructor"===t.type?"constructor(".concat(pe(t.inputs),")").concat("payable"===t.stateMutability?" payable":""):"fallback"===t.type?"fallback() external".concat("payable"===t.stateMutability?" payable":""):"receive() external payable"}(t));function ye(t){return e=fe(t),le(e);var e}const ge=t=>ne(ye(t),0,4),me=ye;function be(t,e){const n=typeof t,s=e.type;switch(s){case"address":return ee(t,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===s&&"components"in e?Object.values(e.components).every(((e,n)=>be(Object.values(t)[n],e))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?"string"===n||t instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)&&(Array.isArray(t)&&t.every((t=>be(t,(0,k.A)((0,k.A)({},e),{},{type:s.replace(/(\[[0-9]{0,}\])$/,"")})))))}}function ve(t,e,n){for(const s in t){const i=t[s],r=e[s];if("tuple"===i.type&&"tuple"===r.type&&"components"in i&&"components"in r)return ve(i.components,r.components,n[s]);const o=[i.type,r.type];if(!(!o.includes("address")||!o.includes("bytes20"))||(o.includes("address")&&o.includes("string")||!(!o.includes("address")||!o.includes("bytes")))&&ee(n[s],{strict:!1}))return o}}const we="/docs/contract/encodeFunctionData";function xe(t){const{abi:e,args:n,functionName:s}=t;let i=e[0];if(s){const t=function(t){const{abi:e,args:n=[],name:s}=t,i=T(s,{strict:!1}),r=e.filter((t=>i?"function"===t.type?ge(t)===s:"event"===t.type&&me(t)===s:"name"in t&&t.name===s));if(0===r.length)return;if(1===r.length)return r[0];let o;for(const a of r)if("inputs"in a)if(n&&0!==n.length){if(a.inputs&&0!==a.inputs.length&&a.inputs.length===n.length&&n.every(((t,e)=>{const n="inputs"in a&&a.inputs[e];return!!n&&be(t,n)}))){if(o&&"inputs"in o&&o.inputs){const t=ve(a.inputs,o.inputs,n);if(t)throw new H({abiItem:a,type:t[0]},{abiItem:o,type:t[1]})}o=a}}else if(!a.inputs||0===a.inputs.length)return a;return o||r[0]}({abi:e,args:n,name:s});if(!t)throw new U(s,{docsPath:we});i=t}if("function"!==i.type)throw new U(void 0,{docsPath:we});return{abi:[i],functionName:ge(P(i))}}function Ae(t){const{args:e}=t,{abi:n,functionName:s}=1===t.abi.length&&null!==(i=t.functionName)&&void 0!==i&&i.startsWith("0x")?t:xe(t);var i;const r=n[0],o=s,a="inputs"in r&&r.inputs?ae(r.inputs,null!==e&&void 0!==e?e:[]):void 0;return B([o,null!==a&&void 0!==a?a:"0x"])}const Ie="\x19Ethereum Signed Message:\n";function ze(t,e){return Kt(function(t){const e="string"===typeof t?at(t):"string"===typeof t.raw?t.raw:it(t.raw);return E([at("".concat(Ie).concat(O(e))),e])}(t),e)}class Se extends C{constructor(t){let{domain:e}=t;var n,s,i;super('Invalid domain "'.concat((n=e,JSON.stringify(n,((t,e)=>{const n="bigint"===typeof e?e.toString():e;return"function"===typeof s?s(t,n):n}),i)),'".'),{metaMessages:["Must be a valid EIP-712 domain."]})}}class ke extends C{constructor(t){let{primaryType:e,types:n}=t;super("Invalid primary type `".concat(e,"` must be one of `").concat(JSON.stringify(Object.keys(n)),"`."),{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Ee extends C{constructor(t){let{type:e}=t;super('Struct type "'.concat(e,'" is invalid.'),{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Be(t){let{domain:e}=t;return["string"===typeof(null===e||void 0===e?void 0:e.name)&&{name:"name",type:"string"},(null===e||void 0===e?void 0:e.version)&&{name:"version",type:"string"},("number"===typeof(null===e||void 0===e?void 0:e.chainId)||"bigint"===typeof(null===e||void 0===e?void 0:e.chainId))&&{name:"chainId",type:"uint256"},(null===e||void 0===e?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(null===e||void 0===e?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Pe(t){if("address"===t||"bool"===t||"string"===t||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Ee({type:t})}function Me(t){const{domain:e={},message:n,primaryType:s}=t,i=(0,k.A)({EIP712Domain:Be({domain:e})},t.types);!function(t){const{domain:e,message:n,primaryType:s,types:i}=t,r=(t,e)=>{for(const n of t){const{name:t,type:s}=n,o=e[t],a=s.match(oe);if(a&&("number"===typeof o||"bigint"===typeof o)){const[t,e,n]=a;rt(o,{signed:"int"===e,size:Number.parseInt(n)/8})}if("address"===s&&"string"===typeof o&&!ee(o))throw new $({address:o});const c=s.match(re);if(c){const[t,e]=c;if(e&&O(o)!==Number.parseInt(e))throw new F({expectedSize:Number.parseInt(e),givenSize:O(o)})}const u=i[s];u&&(Pe(s),r(u,o))}};if(i.EIP712Domain&&e){if("object"!==typeof e)throw new Se({domain:e});r(i.EIP712Domain,e)}if("EIP712Domain"!==s){if(!i[s])throw new ke({primaryType:s,types:i});r(i[s],n)}}({domain:e,message:n,primaryType:s,types:i});const r=["0x1901"];return e&&r.push(function(t){let{domain:e,types:n}=t;return Te({data:e,primaryType:"EIP712Domain",types:n})}({domain:e,types:i})),"EIP712Domain"!==s&&r.push(Te({data:n,primaryType:s,types:i})),Kt(E(r))}function Te(t){let{data:e,primaryType:n,types:s}=t;return Kt(Oe({data:e,primaryType:n,types:s}))}function Oe(t){let{data:e,primaryType:n,types:s}=t;const i=[{type:"bytes32"}],r=[Ne({primaryType:n,types:s})];for(const o of s[n]){const[t,n]=Ce({types:s,name:o.name,type:o.type,value:e[o.name]});i.push(t),r.push(n)}return ae(i,r)}function Ne(t){let{primaryType:e,types:n}=t;const s=nt(function(t){let{primaryType:e,types:n}=t,s="";const i=je({primaryType:e,types:n});i.delete(e);const r=[e,...Array.from(i).sort()];for(const o of r)s+="".concat(o,"(").concat(n[o].map((t=>{let{name:e,type:n}=t;return"".concat(n," ").concat(e)})).join(","),")");return s}({primaryType:e,types:n}));return Kt(s)}function je(t){let{primaryType:e,types:n}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;const i=e.match(/^[0-9A-Z_a-z]*/),r=null===i||void 0===i?void 0:i[0];if(s.has(r)||void 0===n[r])return s;s.add(r);for(const o of n[r])je({primaryType:o.type,types:n},s);return s}function Ce(t){let{types:e,name:n,type:s,value:i}=t;if(void 0!==e[s])return[{type:"bytes32"},Kt(Oe({data:i,primaryType:s,types:e}))];if("bytes"===s){const t=i.length%2?"0":"";return i="0x".concat(t+i.slice(2)),[{type:"bytes32"},Kt(i)]}if("string"===s)return[{type:"bytes32"},Kt(nt(i))];if(s.lastIndexOf("]")===s.length-1){const t=s.slice(0,s.lastIndexOf("[")),r=i.map((s=>Ce({name:n,type:t,types:e,value:s})));return[{type:"bytes32"},Kt(ae(r.map((t=>{let[e]=t;return e})),r.map((t=>{let[,e]=t;return e}))))]}return[{type:s},i]}const Le=4001;class _e extends Error{constructor(t,e,n){super(t),this.code=e,this.data=n,Object.setPrototypeOf(this,_e.prototype)}}class qe{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(o.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new _e("Permissions request is invalid",Le);try{return(await this.communicator.send(o.wallet_requestPermissions,t)).data}catch(e){throw new _e("Permissions rejected",Le)}}isPermissionRequestValid(t){return t.every((t=>"object"===typeof t&&Object.keys(t).every((t=>!!Object.values(a).includes(t)))))}}const Re=(t,e)=>e.some((e=>e.parentCapability===t)),Ue=()=>(t,e,n)=>{const s=n.value;return n.value=async function(){const t=new qe(this.communicator);let n=await t.getPermissions();if(Re(e,n)||(n=await t.requestPermissions([{[e]:{}}])),!Re(e,n))throw new _e("Permissions rejected",Le);return s.apply(this)},n};var He=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};class Fe{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(o.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(o.getSafeInfo,void 0)).data}async experimental_getBalances(){let{currency:t="usd"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await this.communicator.send(o.getSafeBalances,{currency:t})).data}async check1271Signature(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x";const n=await this.getInfo(),s=Ae({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,e]}),i={call:d,params:[{to:n.safeAddress,data:s},"latest"]};try{return"0x1626ba7e"===(await this.communicator.send(o.rpcCall,i)).data.slice(0,10).toLowerCase()}catch(r){return!1}}async check1271SignatureBytes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x";const n=await this.getInfo(),s=Ae({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,e]}),i={call:d,params:[{to:n.safeAddress,data:s},"latest"]};try{return"0x20c13b0b"===(await this.communicator.send(o.rpcCall,i)).data.slice(0,10).toLowerCase()}catch(r){return!1}}calculateMessageHash(t){return ze(t)}calculateTypedMessageHash(t){const e="object"===typeof t.domain.chainId?t.domain.chainId.toNumber():Number(t.domain.chainId);let n=t.primaryType;if(!n){const e=Object.values(t.types),s=Object.keys(t.types).filter((t=>e.every((e=>e.every((e=>{let{type:n}=e;return n.replace("[","").replace("]","")!==t}))))));if(0===s.length||s.length>1)throw new Error("Please specify primaryType");n=s[0]}return Me({message:t.message,domain:(0,k.A)((0,k.A)({},t.domain),{},{chainId:e,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt}),types:t.types,primaryType:n})}async getOffChainSignature(t){return(await this.communicator.send(o.getOffChainSignature,t)).data}async isMessageSigned(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x";if("string"===typeof t&&(e=async()=>{const e=this.calculateMessageHash(t);return await this.isMessageHashSigned(e,n)}),u(t)&&(e=async()=>{const e=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(e,n)}),e){return await e()}throw new Error("Invalid message type")}async isMessageHashSigned(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x";const n=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const s of n){if(await s(t,e))return!0}return!1}async getEnvironmentInfo(){return(await this.communicator.send(o.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(o.requestAddressBook,void 0)).data}}He([Ue()],Fe.prototype,"requestAddressBook",null);const De=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{allowedDomains:e=null,debug:n=!1}=t;this.communicator=new c(e,n),this.eth=new S(this.communicator),this.txs=new l(this.communicator),this.safe=new Fe(this.communicator),this.wallet=new qe(this.communicator)}}}}]);
//# sourceMappingURL=2696.daa3acf1.chunk.js.map