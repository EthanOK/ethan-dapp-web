"use strict";(self.webpackChunkethan_dapp_web=self.webpackChunkethan_dapp_web||[]).push([[8267],{48267:(t,n,e)=>{var i,r=e(46420),o=e(31602),a=e(27101),s=e(94394),l=e(83443),c=e(37841),u=e(74439),p=e(93813),d=e(45558),h=e(42549),g=e(76911),w=e(1395),y=(e(73425),e(90019),e(33636),e(95205),e(44185)),v=e(99868),x=e(35999),m=(e(21640),e(51396),e(39454),e(7672));!function(t){t.approve="approved",t.bought="bought",t.borrow="borrowed",t.burn="burnt",t.cancel="canceled",t.claim="claimed",t.deploy="deployed",t.deposit="deposited",t.execute="executed",t.mint="minted",t.receive="received",t.repay="repaid",t.send="sent",t.sell="sold",t.stake="staked",t.trade="swapped",t.unstake="unstaked",t.withdraw="withdrawn"}(i||(i={}));var f,b=e(15191);e(75296),e(63782);const A=(0,y.AH)(f||(f=(0,r.A)(["\n  :host > wui-flex {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    width: 40px;\n    height: 40px;\n    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);\n    background-color: var(--wui-color-gray-glass-005);\n  }\n\n  :host > wui-flex wui-image {\n    display: block;\n  }\n\n  :host > wui-flex,\n  :host > wui-flex wui-image,\n  .swap-images-container,\n  .swap-images-container.nft,\n  wui-image.nft {\n    border-top-left-radius: var(--local-left-border-radius);\n    border-top-right-radius: var(--local-right-border-radius);\n    border-bottom-left-radius: var(--local-left-border-radius);\n    border-bottom-right-radius: var(--local-right-border-radius);\n  }\n\n  wui-icon {\n    width: 20px;\n    height: 20px;\n  }\n\n  wui-icon-box {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    transform: translate(20%, 20%);\n  }\n\n  .swap-images-container {\n    position: relative;\n    width: 40px;\n    height: 40px;\n    overflow: hidden;\n  }\n\n  .swap-images-container wui-image:first-child {\n    position: absolute;\n    width: 40px;\n    height: 40px;\n    top: 0;\n    left: 0%;\n    clip-path: inset(0px calc(50% + 2px) 0px 0%);\n  }\n\n  .swap-images-container wui-image:last-child {\n    clip-path: inset(0px 0px 0px calc(50% + 2px));\n  }\n"])));var T,k,C,D,I,O,q,M,W=function(t,n,e,i){var r,o=arguments.length,a=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(n,e,a):r(n,e))||a);return o>3&&a&&Object.defineProperty(n,e,a),a};let P=class extends y.WF{constructor(){super(...arguments),this.images=[],this.secondImage={type:void 0,url:""}}render(){const[t,n]=this.images,e="NFT"===(null===t||void 0===t?void 0:t.type),i=e?"var(--wui-border-radius-xxs)":"var(--wui-border-radius-s)",o=(null!==n&&void 0!==n&&n.url?"NFT"===n.type:e)?"var(--wui-border-radius-xxs)":"var(--wui-border-radius-s)";return this.style.cssText="\n    --local-left-border-radius: ".concat(i,";\n    --local-right-border-radius: ").concat(o,";\n    "),(0,y.qy)(T||(T=(0,r.A)(["<wui-flex> "," "," </wui-flex>"])),this.templateVisual(),this.templateIcon())}templateVisual(){const[t,n]=this.images,e=null===t||void 0===t?void 0:t.type;return 2===this.images.length&&(null!==t&&void 0!==t&&t.url||null!==n&&void 0!==n&&n.url)?(0,y.qy)(k||(k=(0,r.A)(['<div class="swap-images-container">\n        ',"\n        ","\n      </div>"])),null!==t&&void 0!==t&&t.url?(0,y.qy)(C||(C=(0,r.A)(["<wui-image src=",' alt="Transaction image"></wui-image>'])),t.url):null,null!==n&&void 0!==n&&n.url?(0,y.qy)(D||(D=(0,r.A)(["<wui-image src=",' alt="Transaction image"></wui-image>'])),n.url):null):null!==t&&void 0!==t&&t.url?(0,y.qy)(I||(I=(0,r.A)(["<wui-image src=",' alt="Transaction image"></wui-image>'])),t.url):"NFT"===e?(0,y.qy)(O||(O=(0,r.A)(['<wui-icon size="inherit" color="fg-200" name="nftPlaceholder"></wui-icon>']))):(0,y.qy)(q||(q=(0,r.A)(['<wui-icon size="inherit" color="fg-200" name="coinPlaceholder"></wui-icon>'])))}templateIcon(){let t,n="accent-100";return t=this.getIcon(),this.status&&(n=this.getStatusColor()),t?(0,y.qy)(M||(M=(0,r.A)(['\n      <wui-icon-box\n        size="xxs"\n        iconColor=',"\n        backgroundColor=",'\n        background="opaque"\n        icon=',"\n        ?border=",'\n        borderColor="wui-color-bg-125"\n      ></wui-icon-box>\n    '])),n,n,t,!0):null}getDirectionIcon(){switch(this.direction){case"in":return"arrowBottom";case"out":return"arrowTop";default:return}}getIcon(){return this.onlyDirectionIcon?this.getDirectionIcon():"trade"===this.type?"swapHorizontalBold":"approve"===this.type?"checkmark":"cancel"===this.type?"close":this.getDirectionIcon()}getStatusColor(){switch(this.status){case"confirmed":return"success-100";case"failed":return"error-100";case"pending":return"inverse-100";default:return"accent-100"}}};var R;P.styles=[A],W([(0,v.MZ)()],P.prototype,"type",void 0),W([(0,v.MZ)()],P.prototype,"status",void 0),W([(0,v.MZ)()],P.prototype,"direction",void 0),W([(0,v.MZ)({type:Boolean})],P.prototype,"onlyDirectionIcon",void 0),W([(0,v.MZ)({type:Array})],P.prototype,"images",void 0),W([(0,v.MZ)({type:Object})],P.prototype,"secondImage",void 0),P=W([(0,b.E)("wui-transaction-visual")],P);const j=(0,y.AH)(R||(R=(0,r.A)(["\n  :host > wui-flex:first-child {\n    align-items: center;\n    column-gap: var(--wui-spacing-s);\n    padding: 6.5px var(--wui-spacing-xs) 6.5px var(--wui-spacing-xs);\n    width: 100%;\n  }\n\n  :host > wui-flex:first-child wui-text:nth-child(1) {\n    text-transform: capitalize;\n  }\n\n  wui-transaction-visual {\n    width: 40px;\n    height: 40px;\n  }\n\n  wui-flex {\n    flex: 1;\n  }\n\n  :host wui-flex wui-flex {\n    overflow: hidden;\n  }\n\n  :host .description-container wui-text span {\n    word-break: break-all;\n  }\n\n  :host .description-container wui-text {\n    overflow: hidden;\n  }\n\n  :host .description-separator-icon {\n    margin: 0px 6px;\n  }\n\n  :host wui-text > span {\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 1;\n  }\n"])));var Z,S,B,N=function(t,n,e,i){var r,o=arguments.length,a=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(n,e,a):r(n,e))||a);return o>3&&a&&Object.defineProperty(n,e,a),a};let Y=class extends y.WF{constructor(){super(...arguments),this.type="approve",this.onlyDirectionIcon=!1,this.images=[],this.price=[],this.amount=[],this.symbol=[]}render(){return(0,y.qy)(Z||(Z=(0,r.A)(["\n      <wui-flex>\n        <wui-transaction-visual\n          .status=","\n          direction=","\n          type=","\n          onlyDirectionIcon=","\n          .images=",'\n        ></wui-transaction-visual>\n        <wui-flex flexDirection="column" gap="3xs">\n          <wui-text variant="paragraph-600" color="fg-100">\n            ','\n          </wui-text>\n          <wui-flex class="description-container">\n            '," ",'\n          </wui-flex>\n        </wui-flex>\n        <wui-text variant="micro-700" color="fg-300"><span>',"</span></wui-text>\n      </wui-flex>\n    "])),this.status,(0,x.J)(this.direction),this.type,(0,x.J)(this.onlyDirectionIcon),this.images,i[this.type]||this.type,this.templateDescription(),this.templateSecondDescription(),this.date)}templateDescription(){var t;const n=null===(t=this.descriptions)||void 0===t?void 0:t[0];return n?(0,y.qy)(S||(S=(0,r.A)(['\n          <wui-text variant="small-500" color="fg-200">\n            <span>',"</span>\n          </wui-text>\n        "])),n):null}templateSecondDescription(){var t;const n=null===(t=this.descriptions)||void 0===t?void 0:t[1];return n?(0,y.qy)(B||(B=(0,r.A)(['\n          <wui-icon class="description-separator-icon" size="xxs" name="arrowRight"></wui-icon>\n          <wui-text variant="small-400" color="fg-200">\n            <span>',"</span>\n          </wui-text>\n        "])),n):null}};Y.styles=[m.W5,j],N([(0,v.MZ)()],Y.prototype,"type",void 0),N([(0,v.MZ)({type:Array})],Y.prototype,"descriptions",void 0),N([(0,v.MZ)()],Y.prototype,"date",void 0),N([(0,v.MZ)({type:Boolean})],Y.prototype,"onlyDirectionIcon",void 0),N([(0,v.MZ)()],Y.prototype,"status",void 0),N([(0,v.MZ)()],Y.prototype,"direction",void 0),N([(0,v.MZ)({type:Array})],Y.prototype,"images",void 0),N([(0,v.MZ)({type:Array})],Y.prototype,"price",void 0),N([(0,v.MZ)({type:Array})],Y.prototype,"amount",void 0),N([(0,v.MZ)({type:Array})],Y.prototype,"symbol",void 0),Y=N([(0,b.E)("wui-transaction-list-item")],Y);e(59802);var z,E=e(13729);const _=(0,o.AH)(z||(z=(0,r.A)(["\n  :host {\n    min-height: 100%;\n  }\n\n  .group-container[last-group='true'] {\n    padding-bottom: var(--wui-spacing-m);\n  }\n\n  .contentContainer {\n    height: 280px;\n  }\n\n  .contentContainer > wui-icon-box {\n    width: 40px;\n    height: 40px;\n    border-radius: var(--wui-border-radius-xxs);\n  }\n\n  .contentContainer > .textContent {\n    width: 65%;\n  }\n\n  .emptyContainer {\n    height: 100%;\n  }\n"])));var F,H,V,L,U,G,J,K,Q,X,$,tt=function(t,n,e,i){var r,o=arguments.length,a=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(n,e,a):r(n,e))||a);return o>3&&a&&Object.defineProperty(n,e,a),a};const nt="last-transaction";let et=class extends o.WF{constructor(){super(),this.unsubscribe=[],this.paginationObserver=void 0,this.page="activity",this.caipAddress=l.W.state.activeCaipAddress,this.transactionsByYear=c.W.state.transactionsByYear,this.loading=c.W.state.loading,this.empty=c.W.state.empty,this.next=c.W.state.next,c.W.clearCursor(),this.unsubscribe.push(l.W.subscribeKey("activeCaipAddress",(t=>{t&&this.caipAddress!==t&&(c.W.resetTransactions(),c.W.fetchTransactions(t)),this.caipAddress=t})),l.W.subscribeKey("activeCaipNetwork",(()=>{this.updateTransactionView()})),c.W.subscribe((t=>{this.transactionsByYear=t.transactionsByYear,this.loading=t.loading,this.empty=t.empty,this.next=t.next})))}firstUpdated(){this.updateTransactionView(),this.createPaginationObserver()}updated(){this.setPaginationObserver()}disconnectedCallback(){this.unsubscribe.forEach((t=>t()))}render(){return(0,o.qy)(F||(F=(0,r.A)([" ","\n    ","\n    ",""])),this.empty?null:this.templateTransactionsByYear(),this.loading?this.templateLoading():null,!this.loading&&this.empty?this.templateEmpty():null)}updateTransactionView(){c.W.resetTransactions(),this.caipAddress&&c.W.fetchTransactions(u.w.getPlainAddress(this.caipAddress))}templateTransactionsByYear(){return Object.keys(this.transactionsByYear).sort().reverse().map((t=>{const n=parseInt(t,10),e=new Array(12).fill(null).map(((t,e)=>{var i;return{groupTitle:w.tt.getTransactionGroupTitle(n,e),transactions:null===(i=this.transactionsByYear[n])||void 0===i?void 0:i[e]}})).filter((t=>{let{transactions:n}=t;return n})).reverse();return e.map(((t,n)=>{let{groupTitle:i,transactions:a}=t;const s=n===e.length-1;return a?(0,o.qy)(H||(H=(0,r.A)(['\n          <wui-flex\n            flexDirection="column"\n            class="group-container"\n            last-group="','"\n            data-testid="month-indexes"\n          >\n            <wui-flex\n              alignItems="center"\n              flexDirection="row"\n              .padding=','\n            >\n              <wui-text variant="paragraph-500" color="fg-200" data-testid="group-title"\n                >','</wui-text\n              >\n            </wui-flex>\n            <wui-flex flexDirection="column" gap="xs">\n              ',"\n            </wui-flex>\n          </wui-flex>\n        "])),s?"true":"false",["xs","s","s","s"],i,this.templateTransactions(a,s)):null}))}))}templateRenderTransaction(t,n){const{date:e,descriptions:i,direction:a,isAllNFT:s,images:l,status:c,transfers:u,type:p}=this.getTransactionListItemProps(t),d=(null===u||void 0===u?void 0:u.length)>1;return 2===(null===u||void 0===u?void 0:u.length)&&!s?(0,o.qy)(V||(V=(0,r.A)(["\n        <wui-transaction-list-item\n          date=","\n          .direction=","\n          id=","\n          status=","\n          type=","\n          .images=","\n          .descriptions=","\n        ></wui-transaction-list-item>\n      "])),e,a,n&&this.next?nt:"",c,p,l,i):d?u.map(((t,i)=>{const a=w.tt.getTransferDescription(t),s=n&&i===u.length-1;return(0,o.qy)(L||(L=(0,r.A)([" <wui-transaction-list-item\n          date=","\n          direction=","\n          id=","\n          status=","\n          type=","\n          .onlyDirectionIcon=","\n          .images=","\n          .descriptions=","\n        ></wui-transaction-list-item>"])),e,t.direction,s&&this.next?nt:"",c,p,!0,[l[i]],[a])})):(0,o.qy)(U||(U=(0,r.A)(["\n      <wui-transaction-list-item\n        date=","\n        .direction=","\n        id=","\n        status=","\n        type=","\n        .images=","\n        .descriptions=","\n      ></wui-transaction-list-item>\n    "])),e,a,n&&this.next?nt:"",c,p,l,i)}templateTransactions(t,n){return t.map(((e,i)=>{const a=n&&i===t.length-1;return(0,o.qy)(G||(G=(0,r.A)(["",""])),this.templateRenderTransaction(e,a))}))}emptyStateActivity(){return(0,o.qy)(J||(J=(0,r.A)(['<wui-flex\n      class="emptyContainer"\n      flexGrow="1"\n      flexDirection="column"\n      justifyContent="center"\n      alignItems="center"\n      .padding=','\n      gap="xl"\n      data-testid="empty-activity-state"\n    >\n      <wui-icon-box\n        backgroundColor="gray-glass-005"\n        background="gray"\n        iconColor="fg-200"\n        icon="wallet"\n        size="lg"\n        ?border=','\n        borderColor="wui-color-bg-125"\n      ></wui-icon-box>\n      <wui-flex flexDirection="column" alignItems="center" gap="xs">\n        <wui-text align="center" variant="paragraph-500" color="fg-100"\n          >No Transactions yet</wui-text\n        >\n        <wui-text align="center" variant="small-500" color="fg-200"\n          >Start trading on dApps <br />\n          to grow your wallet!</wui-text\n        >\n      </wui-flex>\n    </wui-flex>'])),["3xl","xl","3xl","xl"],!0)}emptyStateAccount(){return(0,o.qy)(K||(K=(0,r.A)(['<wui-flex\n      class="contentContainer"\n      alignItems="center"\n      justifyContent="center"\n      flexDirection="column"\n      gap="l"\n      data-testid="empty-account-state"\n    >\n      <wui-icon-box\n        icon="swapHorizontal"\n        size="inherit"\n        iconColor="fg-200"\n        backgroundColor="fg-200"\n        iconSize="lg"\n      ></wui-icon-box>\n      <wui-flex\n        class="textContent"\n        gap="xs"\n        flexDirection="column"\n        justifyContent="center"\n        flexDirection="column"\n      >\n        <wui-text variant="paragraph-500" align="center" color="fg-100">No activity yet</wui-text>\n        <wui-text variant="small-400" align="center" color="fg-200"\n          >Your next transactions will appear here</wui-text\n        >\n      </wui-flex>\n      <wui-link @click=',">Trade</wui-link>\n    </wui-flex>"])),this.onReceiveClick.bind(this))}templateEmpty(){return"account"===this.page?(0,o.qy)(Q||(Q=(0,r.A)(["",""])),this.emptyStateAccount()):(0,o.qy)(X||(X=(0,r.A)(["",""])),this.emptyStateActivity())}templateLoading(){return"activity"===this.page?Array(7).fill((0,o.qy)($||($=(0,r.A)([" <wui-transaction-list-item-loader></wui-transaction-list-item-loader> "])))).map((t=>t)):null}onReceiveClick(){p.I.push("WalletReceive")}createPaginationObserver(){const{projectId:t}=d.H.state;this.paginationObserver=new IntersectionObserver((n=>{let[e]=n;null!==e&&void 0!==e&&e.isIntersecting&&!this.loading&&(c.W.fetchTransactions(u.w.getPlainAddress(this.caipAddress)),h.E.sendEvent({type:"track",event:"LOAD_MORE_TRANSACTIONS",properties:{address:u.w.getPlainAddress(this.caipAddress),projectId:t,cursor:this.next,isSmartAccount:(0,g.lj)(l.W.state.activeChain)===E.Vl.ACCOUNT_TYPES.SMART_ACCOUNT}}))}),{}),this.setPaginationObserver()}setPaginationObserver(){var t,n;null===(t=this.paginationObserver)||void 0===t||t.disconnect();const e=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#".concat(nt));var i;e&&(null===(i=this.paginationObserver)||void 0===i||i.observe(e))}getTransactionListItemProps(t){var n,e,i,r,o;const a=s.r.formatDate(null===t||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.minedAt),l=w.tt.getTransactionDescriptions(t),c=null===t||void 0===t?void 0:t.transfers,u=null===t||void 0===t||null===(e=t.transfers)||void 0===e?void 0:e[0],p=Boolean(u)&&(null===t||void 0===t||null===(i=t.transfers)||void 0===i?void 0:i.every((t=>Boolean(t.nft_info)))),d=w.tt.getTransactionImages(c);return{date:a,direction:null===u||void 0===u?void 0:u.direction,descriptions:l,isAllNFT:p,images:d,status:null===(r=t.metadata)||void 0===r?void 0:r.status,transfers:c,type:null===(o=t.metadata)||void 0===o?void 0:o.operationType}}};et.styles=_,tt([(0,a.MZ)()],et.prototype,"page",void 0),tt([(0,a.wk)()],et.prototype,"caipAddress",void 0),tt([(0,a.wk)()],et.prototype,"transactionsByYear",void 0),tt([(0,a.wk)()],et.prototype,"loading",void 0),tt([(0,a.wk)()],et.prototype,"empty",void 0),tt([(0,a.wk)()],et.prototype,"next",void 0),et=tt([(0,w.EM)("w3m-activity-list")],et)}}]);
//# sourceMappingURL=8267.a4cef09f.chunk.js.map